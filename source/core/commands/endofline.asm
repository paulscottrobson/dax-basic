; ***************************************************************************************
; ***************************************************************************************
;
;		Name : 		endofline.asm
;		Author :	Paul Robson (paul@robsons.org.uk)
;		Date : 		3rd June 2022
;		Reviewed :	None
;		Purpose :	Handle end of line.
;
; ***************************************************************************************
; ***************************************************************************************

; ***************************************************************************************
;
;						Handle reaching the EOL Marker $80
;
; ***************************************************************************************

EOLHandler: 	;; [[[eol]]]
		ld 		ix,(CurrentLineStart) 		; current line.
		ld  	de,$0000 					; get offset into DE (24 bit)
		ld 		e,(ix+0)
		add 	ix,de 						; point DE to next line.
		;
		ld 		sp,(RunStackPtr) 			; restore SP as we're crashing out.
		jp 		CRNewLine 					; and start running a new line.

; ***************************************************************************************
;
;									Changes and Updates
;
; ***************************************************************************************
;
;		Date			Notes
;		==== 			=====
;
; ***************************************************************************************
		